<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plots a Wally plot — wallyplot.default • MESS</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">MESS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/MESS.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ekstroem/MESS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plots a Wally plot</h1>
    </div>

    
    <p>Produces a 3x3 grid of residual- or qq-plots plots from a lm object. One of
the nine subfigures is the true residual plot/qqplot while the remaining are
plots that fulfill the assumptions of the linear model</p>
    

    <pre class="usage"><span class='co'># S3 method for default</span>
<span class='fu'>wallyplot</span>(<span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>residualplot</span>, <span class='kw'>hide</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>simulateFunction</span> <span class='kw'>=</span> <span class='no'>rnorm</span>, <span class='no'>...</span>)

<span class='co'># S3 method for lm</span>
<span class='fu'>wallyplot</span>(<span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>residualplot</span>, <span class='kw'>hide</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>simulateFunction</span> <span class='kw'>=</span> <span class='no'>rnorm</span>, <span class='no'>...</span>)

<span class='fu'>wallyplot</span>(<span class='no'>x</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>x</span>, <span class='kw'>FUN</span> <span class='kw'>=</span> <span class='no'>residualplot</span>, <span class='kw'>hide</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>simulateFunction</span> <span class='kw'>=</span> <span class='no'>rnorm</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>a numeric vector of x values, or an lm object.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>a numeric vector of y values of the same length as x or a n * 9
matrix of y values - one column for each of the nine plots to make. The
first column is the one corresponding to the results from the dataset</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>a function that accepts an <code>x</code>, <code>y</code> and <code>...</code>
argument and produces a graphical model validation plots from the <code>x</code>
and <code>y</code> values.</p></td>
    </tr>
    <tr>
      <th>hide</th>
      <td><p>logical; if <code>TRUE</code> (the default) then the identity of the
true residual plot is hidden until the user presses a key. If <code>FALSE</code>
then the true residual plot is shown in the center.</p></td>
    </tr>
    <tr>
      <th>simulateFunction</th>
      <td><p>The function used to produce y values under the null
hypothesis. Defaults to rnorm</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other arguments passed to the plot function <code>FUN</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Users who look at residual plots or qqnorm plots for the first time often
feel they lack the experience to determine if the residual plot is okay or
if the model assumptions are indeed violated. One way to convey "experience"
is to plot a series of graphical model validation plots simulated under the
model assumption together with the corresponding plot from the real data and
see if the user can pinpoint one of them that looks like an odd-one-out. If
the proper plot from the real data does not stand out then the assumptions
are not likely to be violated.</p>
<p>The Wallyplot produces a 3x3 grid of plots from a lm object or from a set of
pairs of x and y values. One of the nine subfigures is the true plot while
the remaining are plots that fulfill the assumptions of the linear model.
After the user interactively hits a key the correct residual plot
(correponding to the provided data) is shown.</p>
<p>The plotting function can be set using the <code>FUN</code> argument which should
be a function that accepts <code>x</code>, <code>y</code> and <code>...</code> arguments and
plots the desired figure. When <code>y</code> is a single vector the same length
as <code>x</code> then the function <code>simulateFunction</code> is used to generate
the remaining y values corresponding the situations under the null.</p>
<p>For a description of the features of the default residual plot see the help page for <code><a href='residualplot.html'>residualplot</a></code>.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ekstrom, CT (2014) <em>Teaching 'Instant Experience' with
Graphical Model Validation Techniques</em>. Teaching Statistics (36), p 23-26</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
</div><span class='co'># NOT RUN {</span>
<span class='fu'>data</span>(<span class='no'>trees</span>)
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>lm</span>(<span class='no'>Volume</span> ~ <span class='no'>Height</span> + <span class='no'>Girth</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>trees</span>)
<span class='fu'>wallyplot</span>(<span class='no'>res</span>)


<span class='co'># Create a grid of QQ-plot figures</span>
<span class='co'># Define function to plot a qq plot with an identity line</span>
<span class='no'>qqnorm.wally</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>...</span>) { <span class='fu'>qqnorm</span>(<span class='no'>y</span>, <span class='no'>...</span>) ; <span class='fu'>abline</span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fl'>0</span>, <span class='kw'>b</span><span class='kw'>=</span><span class='fl'>1</span>) }
<span class='fu'>wallyplot</span>(<span class='no'>res</span>, <span class='kw'>FUN</span><span class='kw'>=</span><span class='no'>qqnorm.wally</span>, <span class='kw'>main</span><span class='kw'>=</span><span class='st'>""</span>)

<span class='co'># Define function to simulate components+residuals for Girth</span>
<span class='no'>cprsimulate</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>n</span>) {<span class='fu'>rnorm</span>(<span class='no'>n</span>)+<span class='no'>trees</span>$<span class='no'>Girth</span>}
<span class='co'># Create the cpr plotting function</span>
<span class='no'>cprplot</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='no'>...</span>) {<span class='fu'>plot</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>pch</span><span class='kw'>=</span><span class='fl'>20</span>, <span class='no'>...</span>) ;
                                 <span class='fu'>lines</span>(<span class='fu'>lowess</span>(<span class='no'>x</span>, <span class='no'>y</span>), <span class='kw'>lty</span><span class='kw'>=</span><span class='fl'>3</span>)}
<span class='co'># Create the Wallyplot</span>
<span class='fu'>wallyplot</span>(<span class='no'>trees</span>$<span class='no'>Girth</span>, <span class='no'>trees</span>$<span class='no'>Girth</span>+<span class='fu'>rstudent</span>(<span class='no'>res</span>), <span class='kw'>FUN</span><span class='kw'>=</span><span class='no'>cprplot</span>,
          <span class='kw'>simulateFunction</span><span class='kw'>=</span><span class='no'>cprsimulate</span>, <span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>"Girth"</span>)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Claus Ekstrom <a href='mailto:claus@rprimer.dk'>claus@rprimer.dk</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Claus Thorn Ekstrøm.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
